<?xml version="1.0" encoding="UTF-8"?><html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
<meta name="copyright" content="(C) Copyright 2005"></meta>
<meta name="DC.rights.owner" content="(C) Copyright 2005"></meta>
<meta name="DC.Type" content="concept"></meta>
<meta name="DC.Title" content="Map-Driven Processing"></meta>
<meta name="abstract" content="Using and extending the DITA for Publishers map-driven processing framework"></meta>
<meta name="description" content="Using and extending the DITA for Publishers map-driven processing framework"></meta>
<meta name="DC.subject" content="HTML, generating, map-driven processing, using, maps, processing topics in terms of, topics, processing in map context"></meta>
<meta name="keywords" content="HTML, generating, map-driven processing, using, maps, processing topics in terms of, topics, processing in map context"></meta>
<meta name="DC.Relation" scheme="URI" content="../introduction-chapter.html"></meta>
<meta name="DC.Relation" scheme="URI" content="../epub-plugin/generating-epubs.html"></meta>
<meta name="DC.Relation" scheme="URI" content="../html2-plugin/html2-toolkit-plugin.html"></meta>
<meta name="DC.Relation" scheme="URI" content="data-collection.html"></meta>
<meta name="DC.Relation" scheme="URI" content="enumeration.html"></meta>
<meta name="DC.Relation" scheme="URI" content="index-generation.html"></meta>
<meta name="DC.Relation" scheme="URI" content="graphic-map-generation.html"></meta>
<meta name="prodname" content="DITA For Publishers"></meta>
<meta name="version" content="0.9.19RC12"></meta>
<meta name="DC.Creator" content="W. Eliot Kimber"></meta>
<meta name="DC.Format" content="XHTML"></meta>
<meta name="DC.Identifier" content="conceptId"></meta>
<link rel="stylesheet" type="text/css" href="../../../commonltr.css"></link>
<title>Map-Driven Processing</title>
</head>
<body id="conceptId">


 <h1 class="title topictitle1"><span xmlns="http://www.w3.org/1999/xhtml" class="enumeration_chapter">Chapter 4. </span>Map-Driven Processing</h1>
 
  
 <div class="body conbody"><p class="shortdesc">Using and extending the DITA for Publishers map-driven processing
    framework</p>

   <div class="p">DITA for Publishers provides general map-driven processing whereby the
      output generation for each topic is driven by processing of the root input
      map. This allows each topic to be processed with full knowledge of its use
      context in the map. This in turn enables a number of important functions:<ul class="ul">
      <li class="li">Numbering of topics and within-topic elements in terms of the topicref
        hierarchy in the map ("enumeration").</li>

      <li class="li">Processing of topics in terms of semantics imposed by topicrefs (e.g.,
        processing a generic topic as a "chapter" because it is referenced by a
        <code>&lt;chapter&gt;</code> topicref).</li>

      <li class="li">Distinguishing separate uses of the same topic within a map in order
        to do automatic chunking and link rewriting.</li>

      <li class="li">Generating output files in a structure different from the source file
        organization structure.</li>

      <li class="li">Generation of literal files for topic heads as though the topic heads
        were references to title-only topics.</li>

      <li class="li">Generation of a back-of-the-book indexes, glossaries, and other
        publication-scope lists.</li>

      </ul>
</div>

    <p class="p">The map-driven processing is used by all the DITA for Publishers
      transformation types, including HTML2, HTML5, EPUB, and Kindle. It is
      intended to be a general facility that can be used with any output
      type.</p>

    <div class="note note"><span class="notetitle">Note:</span> The map-driven framework could also be used to generate PDF. However,
      the current architecture of the base Toolkit PDF transform does not lend
      itself to easily being reworked to replace its map-merge-based approach
      with a map-driven approach.</div>

    <div class="p">The general processing model uses two main phases:<ol class="ol" id="conceptId__ol_izv_h2d_rh">
      <li class="li">Data collection</li>

      <li class="li">Output generation</li>

      </ol>
</div>

    <div class="p">The data collection phase operates on the map and its topics to build up
      a single XML structure that contains the information needed to do the following:<ul class="ul" id="conceptId__ul_zgw_l2d_rh">
      <li class="li">Number things using normal XSLT numbering facilities (e.g.,
        <code>&lt;xsl:number&gt;</code>) (enumeration
        support).<a id="d7922e107" class="indexterm-anchor"></a><a id="d7922e111" class="indexterm-anchor"></a></li>

      <li class="li">Index entries grouped and sorted for use in generating
        back-of-the-book indexes<a id="d7922e118" class="indexterm-anchor"></a></li>

      <li class="li">Glossary entries grouped and sorted for use in generating glossary
        lists<a id="d7922e123" class="indexterm-anchor"></a></li>

      </ul>
</div>

    <div class="p">The output generation phase produces whatever the final result is, e.g.,
      HTML. All output generation phase processing is provided the collected
      data as a tunnel parameter named "collected-data". You can access this
      variable by adding the following <code>&lt;xsl:param&gt;</code> to any
      template:<pre class="pre codeblock">&lt;xsl:template ...&gt;
  <strong class="ph b">&lt;xsl:param name="collected-data" as="element()" tunnel="yes"/&gt;</strong>
  ...
&lt;/xsl:&gt;</pre>
</div>

    <p class="p">You can extend the data collection processing using any of several
      defined extension points.</p>

 </div>

<div class="related-links">
<ol class="olchildlinks">
<li class="link olchildlink"><a href="data-collection.html">Data Collection Processing Phase</a><br></br>
Overview of map-driven-processing data collection phase </li>
<li class="link olchildlink"><a href="enumeration.html">Numbering Things: Collected Data and Enumeration</a><br></br>
How to use the collected enumeration data to number things in     output.</li>
<li class="link olchildlink"><a href="index-generation.html">Index Generation</a><br></br>
Overview of using the grouped and sorted index entries in the     collected data to do index generation.</li>
<li class="link olchildlink"><a href="graphic-map-generation.html">Graphic Map Generation</a><br></br>
The map-driven processing generates an Ant script that copies     graphics from their source locations to the output location.</li>
</ol>

<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../introduction-chapter.html">The DITA For Publishers Open Toolkit Plugins</a></div>
<div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../epub-plugin/generating-epubs.html" title="The D4P EPUB and Kindle book generation Open Toolkit plugins enable generation of delivery-ready EPUBs and Kindle books from any conforming DITA content.">Generating EPUBs and Kindle Books from DITA Content</a></div>
<div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../html2-plugin/html2-toolkit-plugin.html" title="Generating HTML using map-drive processing">HTML2 Plugin</a></div>
</div>
</div>

</body>
</html>